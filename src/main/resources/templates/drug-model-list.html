<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="eng">
<head>
  <title>Dermanlar</title>
  <link rel="stylesheet" type="text/css" th:href="@{/css/navbar.css}">
  <link rel="stylesheet" type="text/css" th:href="@{/css/styles.css}">
</head>
<script>
  function toggleMenu(event, id) {
      event.stopPropagation(); // Prevent event from bubbling
      let menu = document.getElementById("menu-" + id);

      // Close all other menus
      document.querySelectorAll('.dropdown-menu').forEach(menu => {
          menu.classList.remove('show');
      });

      // Toggle the clicked menu
      if (menu) {
          menu.classList.toggle("show");
      }
  }

  window.onclick = function() {
      document.querySelectorAll('.dropdown-menu').forEach(menu => {
          menu.classList.remove('show');
      });
  };
</script>
<style>
  .action-container {
      position: relative;
      display: inline-block;
  }

  .menu-icon {
      cursor: pointer;
      font-size: 20px;
      padding: 5px;
  }

  .dropdown-menu {
      display: none;
      position: absolute;
      right: 0;
      background: white;
      border: 1px solid #ccc;
      border-radius: 5px;
      box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.2);
      padding: 5px;
      z-index: 10;
      min-width: 100px;
  }

  .dropdown-menu a {
      display: block;
      padding: 5px 5px;
      text-decoration: none;
      color: black;
  }

  .dropdown-menu a:hover {
      background: #f0f0f0;
  }

  .show {
      display: block;
  }
</style>
<body>
<h1>Dermanlar</h1>
<!--<form th:action="@{/drug-models}" method="get">-->
<!--  <label>Ady: <input type="text" name="name" /></label>-->
<!--  <label>Öndüriji: <input type="text" name="manufacturer" /></label>-->
<!--  <label>Ýapyldy:-->
<!--    <select name="isClosed">-->
<!--      <option value="">-</option>-->
<!--      <option value="true">Hawa</option>-->
<!--      <option value="false">Ýok</option>-->
<!--    </select>-->
<!--  </label>-->
<!--  <button type="submit">Filter</button>-->
<!--</form>-->
<div class="navbar">
  <div class="logo">BD</div>
  <ul>
    <li><a th:href="@{/}">Baş sahypa</a></li>
    <li><a th:href="@{/cargo}">Ýükler</a></li>
    <li><a th:href="@{/drug-models}">Dermanlar</a></li>
    <li><a th:href="@{/contract}">Kontraktlar</a></li>
  </ul>
</div>

<table>
  <thead>
  <tr>
    <th>№</th>
    <th>Ady</th>
    <th>Производитель</th>
    <th>&#8942;</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="drugModel, iterStat : ${drugModels}">
    <td th:text="${iterStat.count}"></td>
    <td th:text="${drugModel.nameDose}"></td>
    <td th:text="${drugModel.firma}"></td>
    <td>
      <div class="action-container">
        <span class="menu-icon" th:attr="onclick=|toggleMenu(event, '${drugModel.id}')|">&#8942;</span>
        <div th:id="'menu-' + ${drugModel.id}" class="dropdown-menu">
          <a th:href="@{/drug-models/edit/{id}(id=${drugModel.id})}">Üýtget</a>
          <br>
          <a th:href="@{/drugs/delete/{id}(id=${drugModel.id})}" onclick="return confirm('Siz hakykatdanam pozmak isleýärsiňizmi?');">
            Poz
          </a>
        </div>
      </div>
    </td>
  </tr>
  </tbody>
</table>
<a th:href="@{/drug-models/add}" class="add-drug-btn">Derman goşmak</a>
</body>
</html>